"use strict";var greenTextApp=angular.module("greenTextApp",["ngCookies","ngResource","ngSanitize","ngRoute"]);greenTextApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"partials/main",controller:"MainCtrl"}).when("/sfw",{templateUrl:"partials/main",controller:"MainCtrl"}).when("/:page",{templateUrl:"partials/main",controller:"MainCtrl"}).when("/sfw/:page",{templateUrl:"partials/main",controller:"MainCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),greenTextApp.controller("MainCtrl",["$scope","API","$store","$sce","$location",function(a,b,c,d,e){var f=JSON.parse(c.get("OVER18"));null!==f&&(a.overEighteen=f);var g=JSON.parse(c.get("SFW"));a.sfw=null!==g?g:!1,a.page=1,a.noMoreStories=!1,a.overEighteen&&(a.verified=!0),"/sfw"===e.path()&&(a.sfw=!0),b.getData(a.page).success(function(b){0===b.length&&(a.error=!0),a.greenTales=b}).error(function(b){a.error=b}),a.trustSrc=function(a){return d.trustAsResourceUrl(a)},a.submitVerification=function(){c.put("OVER18",a.overEighteen),c.put("SFW",a.sfw),a.overEighteen?a.verified=!0:(a.showVerifyError=!0,a.verified=!1)},a.$watch("sfw",function(){c.put("SFW",a.sfw),a.sfw?(e.path("/sfw"),a.storyTemplate="views/partials/sfw.html"):(e.path("/"),a.storyTemplate="views/partials/nsfw.html")}),a.moreStories=function(){a.page+=1,b.getData(a.page).success(function(b){0!==b.length?(a.greenTales=a.greenTales.concat(b),a.noMoreStories=!1):a.noMoreStories=!0}).error(function(b){a.error=b})}}]),greenTextApp.service("API",["$http",function(a){return{getData:function(b){return a.get("/api/getData?page="+b)}}}]),greenTextApp.service("$store",function(){return{get:function(a){var b=window.localStorage.getItem(a)||null;return b},put:function(a,b){window.localStorage.setItem(a,b)}}}),greenTextApp.directive("error",function(){return{restrict:"A",link:function(a,b){a.$watch("error",function(){b.html("<p>>Be site. </p><p>>No Stories :(</p>")})}}}),greenTextApp.directive("greens",function(){return{restrict:"A",link:function(a,b){a.$watch("line",function(){var a=b.html();0===a.indexOf("&gt;")?b.attr("id","greenText"):b.attr("id","normalText")})}}}),greenTextApp.directive("tooltip",function(){return{restrict:"A",link:function(a,b){b.tooltip({placement:"top",title:"All images will be replaced with clickable links.",trigger:"click hover"})}}});